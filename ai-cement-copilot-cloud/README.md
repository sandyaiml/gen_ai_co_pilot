# AI Cement Quality Co-Pilot

AI Cement Quality Co-Pilot is a Streamlit-based web application that helps cement plant operators monitor kiln operations, visualize SCADA and Robolab data, and generate actionable AI recommendations using Google Gemini (GenAI). It integrates Google BigQuery, Vertex AI, and real-time data visualization to support decision-making in cement process optimization.

---

## Key Features

1. **Live Data Dashboard**
   - Fetches real-time process data from Google BigQuery (SCADA and Robolab views).
   - Displays key process KPIs such as kiln burning zone temperature, O₂, CO₂, and kiln speed.
   - Includes sparkline visualizations for quick trend inspection.

2. **XRD Phase Extraction**
   - Upload XRD images (`.png`, `.jpg`, `.jpeg`) to detect and estimate clinker phase compositions such as C3S, C2S, C3A, and C4AF.
   - Supports normalization and JSON export with operator comments.

3. **AI Recommendation Engine (Gemini 2.5-flash)**
   - Generates real-time AI recommendations for process optimization.
   - Provides actionable steps with rationale, confidence level, and expected outcomes.
   - Covers categories like Burning Zone Control, Combustion & Air Control, Raw Mix Adjustment, and more.

4. **SCADA Trend Dashboard**
   - Interactive data visualization using Plotly.
   - Adjustable time window (1 to 48 hours).
   - Rolling mean lines, statistical metrics (mean, min, max, std).

5. **Operator Chat and Follow-ups**
   - Enables chat-based interaction with Gemini for follow-up questions.
   - Maintains session history of operator-AI conversations and recommendations.

---

## Project Structure

```
ai-cement-copilot-cloud/
│
├── app.py                     # Main Streamlit application
├── vis.py                     # Visualization and SCADA plotting functions
├── requirements.txt            # Python dependencies
├── company_logo.png            # Logo displayed on header
├── jk_icon.png                 # Streamlit app icon
├── .streamlit/                 # Streamlit configuration folder
├── cementai/                   # Local virtual environment folder (ignored in Git)
└── streamlit-access-sa.json    # Google Cloud credentials (excluded via .gitignore)
```

---

## Installation and Setup

### Step 1. Clone the Repository

```bash
git clone https://github.com/<your-username>/ai-cement-copilot-cloud.git
cd ai-cement-copilot-cloud
```

### Step 2. Create and Activate a Virtual Environment

```bash
python -m venv venv

# On Windows
venv\Scripts\activate

# On macOS / Linux
source venv/bin/activate
```

### Step 3. Install Dependencies

```bash
pip install -r requirements.txt
```

---

## Google Cloud Setup

1. Make sure you have a **Google Cloud Project** with access to:
   - BigQuery
   - Vertex AI (GenAI)

2. Create a **Service Account** with the following roles:
   - BigQuery Data Viewer
   - Vertex AI User
   - Storage Object Viewer (optional for any data access)

3. Download the service account JSON key file and place it in the project folder (e.g., `streamlit-access-sa.json`).

4. Set the environment variable to point to your key file:

```bash
# Windows PowerShell
$env:GOOGLE_APPLICATION_CREDENTIALS="C:\path\to\streamlit-access-sa.json"

# macOS / Linux
export GOOGLE_APPLICATION_CREDENTIALS="/path/to/streamlit-access-sa.json"
```

---

## Running the Application

Start the Streamlit app using:

```bash
streamlit run app.py
```

Then open the app in your browser at:

```
http://localhost:8501
```

---

## How to Use

1. Upload XRD image.  
2. Confirm C3S, C2S, C3A, and C4AF phase values.  
3. Fetch one-hour SCADA snapshot from BigQuery.  
4. Get AI recommendation generated by Gemini.  
5. Review KPI and SCADA trends.  
6. Ask follow-up questions to refine process insights.

---

## Requirements

The dependencies required to run this application are listed in `requirements.txt`.

Key dependencies include:

```
streamlit==1.27.0
google-cloud-bigquery==3.6.0
google-auth==2.22.0
numpy
opencv-python-headless
scipy
matplotlib
pandas
requests
python-dotenv
google-genai>=0.3.0
db-dtypes
plotly
```

---

## Security Note

- Do **not** upload your `streamlit-access-sa.json` file or any credential to GitHub.  
- Always add sensitive files to `.gitignore`.  
- Example `.gitignore` entry:

```
# Ignore credentials and environment files
streamlit-access-sa.json
.venv/
cementai/
__pycache__/
```

---

## Troubleshooting

Common Issues:
- `google.auth.exceptions.DefaultCredentialsError`: Check that the GOOGLE_APPLICATION_CREDENTIALS environment variable is set correctly.  
- `BigQuery permission denied`: Ensure your service account has BigQuery Data Viewer access.  
- Streamlit not found: Reinstall dependencies using `pip install -r requirements.txt`.

---

## Future Enhancements

- Support for multiple kiln lines and plants.  
- Historical trend analysis with anomaly detection.  
- Integration with production quality KPIs.  
- Automated email alerts for process deviation.

---

